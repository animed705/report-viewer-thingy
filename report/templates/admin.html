{% extends "base.html" %}

{% block content %}

<form class="d-flex flex-column  align-content-center text-center full-container"  name="search" method="post" action="{{url_for('admin')}}">
  <div class="d-flex ">

    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <input class="form-control me-2 p-3 option-view-file bg-light" type="search" placeholder="Enter username to search" aria-label="Search" name="admin" >
    <button class="btn btn-outline-success" type="submit"><img src="../static/search-light.svg" alt="search"></button>
  </div>  
  <div class="d-flex mx-auto mb-5">
    <a class="function-button text-decoration-none option-view-file p-3 text-white my-1 mx-2 " href= "{{url_for('create')}}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Click to add a new user to the database.">Add New User</a>
    <a class="function-button text-decoration-none option-view-file p-3 text-white my-1 mx-2" href= "{{url_for('updateDatabase')}}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Click to update the whole database." >Update whole database</a>
    <a class="function-button text-decoration-none option-view-file p-3 text-white my-1 mx-2" href= "{{url_for('uploadResult')}}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Click to upload result of students." >Upload Results</a>

  </div>


  
  {% if result %}
  
  <table class ="table table-striped text-white">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">User Type</th>
            <th scope="col">Class</th>
          </tr>
        </thead>
    
            <tbody>
                <tr>
                  <th scope="row">
                <form method="post", action="#">
                    <!-- add form -->
                    {{form.csrf_token}}
                    {{form.hidden_tag()}}
                    
                    {% if form.username.errors %}
                    {{form.username(class="is-invalid")}}
                        <div class="invalid-feedback">
                            {% for error in form.username.errors %}
                              <span class="is-invalid">
                                {{error}}
                              </span> 
                              {% endfor %}
    
                        </div>
                    {% else %}
                       {{form.username}}
                    {% endif %}</th>

                  <td>
                    
                    {% if form.userType.errors %}
                    {{form.userType(class="is-invalid")}}
                        <div class="invalid-feedback">
                        {% for error in form.userType.errors %}
                          <span class="is-invalid">
                            {{error}}
                          </span> 
                          {% endfor %}

                        </div>
                        {% else %}
                        {{form.userType}}
                        {% endif %}
                </td>

                  <td>
                
                    {% if form.theClass.errors %}
                    {{form.theClass(class="is-invalid")}}
                        <div class="invalid-feedback">
                            {% for error in form.theClass.errors %}
                              <span class="is-invalid">
                                {{error}}
                              </span> 
                              {% endfor %}
    
                            </div>
                            {% else %}
                            {{form.theClass}}
                            {% endif %}
                    </td>
                    <td>
                      <!-- <input type="hidden" name = "usrId" value="{{result.id}}"> -->
                      <div class="align-items-center d-md-block"> 

                        <!-- Update entry button -->
                        {{form.submit(class = "btn btn-outline-primary mt-0 mb-0 ")}}
                        <!-- delete button -->
                        <a class="function-button text-decoration-none option-view-file px-3 py-2 text-white mx-1 " href= "{{url_for('delete', id =result.id)}}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Click to delete user from the database."  >Delete</a>
                        
                      </div>
                    </td>
                </tr>

              </form>
              {% else %}
                <h1>Nothing found.</h1>
              {% endif %}
            </tbody>
          </table>
          
          {% endblock %}